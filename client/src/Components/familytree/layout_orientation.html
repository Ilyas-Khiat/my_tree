<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/BenPortner/js_family_tree/css/main.css">
</head>

<body>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/BenPortner/js_family_tree/js/d3-dag.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/BenPortner/js_family_tree/js/familytree.js"></script>
    <script>
        // 
        let data ;
        fetch('http://localhost:5000/tree')
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        // Function to draw the family tree
        function drawFamilyTree(data) {
            console.log("r",data)
            const svg = d3.select("body").append("svg")
            .attr("width", document.body.offsetWidth)
            .attr("height", document.documentElement.clientHeight);

            // make family tree object
            let FT = new FamilyTree(data, svg)
                .orientation("vertical");

            // draw family tree
            FT.draw();
        }

        fetch('http://localhost:5000/tree')
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            console.log('Data received:', data);  // Confirm data is received
            drawFamilyTree(data);
        })
        .catch(error => {
            console.error('Failed to fetch the family tree data:', error);
        });

        </script>
</body>

</html>
